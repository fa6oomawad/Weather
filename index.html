<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Weather</title>
    <link rel="stylesheet" type="text/css" media="screen" href="main.css" />
    <script  src="https://unpkg.com/react@16/umd/react.development.js"></script>
  <script  src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
  <script src='https://unpkg.com/babel-standalone@6/babel.min.js'></script>

</head>
<body>
    <div id='app'></div>
<script>

window.API={
    fetchWeatherData(lon,lat){
        const encodedURI=encodeURI(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=5b98059678584b0f9387964f206a09d5`)
return fetch(encodedURI)
.then((data)=> data.json())
.then((repos)=>repos.list)
.catch((error) => {
            console.warn(error)
            return null
          });
    }
}






</script>

    <script type='text/babel'>
function WeatherBox (props){
    return (
<div className='box'>
{props.day.map((day)=>(
    <div key={day} className='weatherbox'>{day}</div>
))}
</div>
    )
}

class App extends React.Component {
constructor(props){
    super(props);
this.state={
    days:['sat','sun','mon',"tues","wen"],
    lon:'',
    lat:''
}

}


 

     
componentDidMount(){
    if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition((position)=> {
          console.log(position.coords.longitude);
          console.log(position.coords.latitude);

           this.setState({
               lon:position.coords.longitude,
               lat:position.coords.latitude
           })

            })



  
}}

componentDidUpdate(){
    window.API.fetchWeatherData(this.state.lon,this.state.lat).then((data)=>{
     console.log('mm');
     console.log(data);
 })         
}


render(){
    return (
<div>
<WeatherBox day={this.state.days} />
</div>


    )
}






}

ReactDOM.render(<App /> , document.getElementById('app'))










    </script>
</body>
</html>